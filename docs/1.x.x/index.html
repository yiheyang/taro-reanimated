<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-41044622-6","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="React Native Reanimated" href="/react-native-reanimated/opensearch.xml"><title data-react-helmet="true">About React Native Reanimated | React Native Reanimated</title><meta data-react-helmet="true" property="og:url" content="https://docs.swmansion.com/react-native-reanimated//react-native-reanimated/docs/1.x.x/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="1.x.x"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-1.x.x"><meta data-react-helmet="true" property="og:title" content="About React Native Reanimated | React Native Reanimated"><meta data-react-helmet="true" name="description" content="React Native&#x27;s Animated library reimplemented."><meta data-react-helmet="true" property="og:description" content="React Native&#x27;s Animated library reimplemented."><link data-react-helmet="true" rel="shortcut icon" href="/react-native-reanimated/img/SWM_Fav_192x192.png"><link data-react-helmet="true" rel="canonical" href="https://docs.swmansion.com/react-native-reanimated//react-native-reanimated/docs/1.x.x/"><link data-react-helmet="true" rel="alternate" href="https://docs.swmansion.com/react-native-reanimated//react-native-reanimated/docs/1.x.x/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.swmansion.com/react-native-reanimated//react-native-reanimated/docs/1.x.x/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/react-native-reanimated/assets/css/styles.e7453ef0.css">
<link rel="preload" href="/react-native-reanimated/assets/js/runtime~main.be6d17ac.js" as="script">
<link rel="preload" href="/react-native-reanimated/assets/js/main.6f849bf3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/react-native-reanimated/"><b class="navbar__title">React Native Reanimated</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/react-native-reanimated/docs/">Docs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/react-native-reanimated/docs/1.x.x/">1.x.x</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/react-native-reanimated/docs/next/">Next</a></li><li><a class="dropdown__link" href="/react-native-reanimated/docs/">2.3.0</a></li><li><a class="dropdown__link" href="/react-native-reanimated/docs/2.2.0/">2.2.0</a></li><li><a class="dropdown__link" href="/react-native-reanimated/docs/2.1.0/">2.1.0</a></li><li><a class="dropdown__link" href="/react-native-reanimated/docs/2.0.0/">2.0.0</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/react-native-reanimated/docs/1.x.x/">1.x.x</a></li></ul></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><a href="https://github.com/software-mansion/react-native-reanimated/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-navbar-logo"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Overview</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/react-native-reanimated/docs/1.x.x/">About</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-reanimated/docs/1.x.x/getting_started">Getting started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-reanimated/docs/1.x.x/declarative">Declarative Animation API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-reanimated/docs/1.x.x/examples">Examples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-reanimated/docs/1.x.x/transitions">Transitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/react-native-reanimated/docs/1.x.x/config">Additional configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Features</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for React Native Reanimated <b>1.x.x</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/react-native-reanimated/docs/">latest version</a></b> (2.3.0).</div></div><div class="docItemContainer_33ec"><article><span class="badge badge--secondary">Version: 1.x.x</span><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">About React Native Reanimated</h1></header><p>React Native&#x27;s Animated library reimplemented.</p><ul><li><strong>Native Performance</strong>: Declare your animations in JS, but have them run on the native thread! üßô‚Äç‚ôÇÔ∏è</li><li><strong>Precise Animations</strong>: The API affords new levels of precision and detailed control of your animations. üïπ</li><li><strong>(mostly) Backwards Compatible</strong>: Use the same Animated API from React Native that you&#x27;ve been using. You generally don&#x27;t <em>need</em> to change anything to get started. üëç</li></ul><p>Reanimated provides a more comprehensive, low level abstraction for the Animated library API, giving you much greater flexibility, control and performance. Combine it with <a href="https://github.com/kmagiera/react-native-gesture-handler" target="_blank" rel="noopener noreferrer">react-native-gesture-handler</a> for performant gesture-based interactions.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="motivation"></a>Motivation<a class="hash-link" href="#motivation" title="Direct link to heading">#</a></h3><p><code>Animated</code> library has several limitations that become troubling when it comes to gesture based interactions.
This project was initially created to resolve the issue of pan interaction when the object can be dragged along the screen and when released it should snap to some place on the screen.
The problem was that despite using <code>Animated.event</code> and mapping gesture state to the position of the box, and making this whole interaction run on UI thread with <code>useNativeDriver</code> flag, we still had to call back into JS at the end of the gesture for us to start &quot;snap&quot; animation.
This is because <code>Animated.spring({}).start()</code> cannot be used in a &quot;declarative&quot; manner, because when it gets executed it has a &quot;side effect&quot; of starting a process (an animation) that updates the value for some time.
Adding &quot;side effect&quot; nodes into the current Animated implementation turned out to be a pretty difficult task as the execution model of the Animated API runs all the dependent nodes of each frame for the views that need to update.
We don&#x27;t want to run &quot;side effects&quot; more often than necessary as it would, for example, result in the animation starting multiple times.</p><p>Another inspiration to redesigning the internals of <code>Animated</code> was Krzysztof&#x27;s work on porting &quot;Animated Tracking&quot; functionality to the native driver.
Apparently, even though the native driver is out for quite a while, it still does not support all the things non-native <code>Animated</code> lib can do.
Obviously, it is far more difficult to build three versions of each feature (JS, Android and iOS) instead of one, and the same applies for fixing bugs.
One of the goals of <code>react-native-reanimated</code> was to provide a more generic building block for the API that would allow for building more complex features only in JS and make the native codebase as minimal as possible.
Taking &quot;diffClamp&quot; node as an example, it is currently implemented in three different places in <code>Animated</code> core and even though it is pretty useful it actually only has one use case (collapsible scrollview header).</p><p>On a similar topic, there&#x27;s React Native&#x27;s PR <a href="https://github.com/facebook/react-native/pull/18029" target="_blank" rel="noopener noreferrer">#18029</a> and even though it provides a legitimate use case, maintainers are hesitant about merging it. The <code>Animated</code> API shouldn&#x27;t block people from building things like this and the goal of <code>react-native-reanimated</code> is to provide lower level access that would allow for implementing that and many more features with no necessary changes to the core of the library.</p><p>You can watch Krzysztof Magiera&#x27;s <a href="https://www.youtube.com/watch?v=kdq4z2708VM" target="_blank" rel="noopener noreferrer">React Europe talk</a> where he explains the motivation.</p><p>The goals:</p><ul><li>More generic primitive node types leading to more code reuse for the library internals therefore making it easier to add new features and fix bugs.</li><li>The new set of base nodes can be used to implement <code>Animated</code> compatible API including:<ul><li>Complex nodes such as ‚ÄúdiffClamp‚Äù.</li><li>Interactions such as animated value tracking or animation staggering.</li></ul></li><li>Conditional evaluation &amp; nodes with side effects (<code>set</code>, <code>startClock</code>, <code>stopClock</code>).</li><li>No more ‚ÄúuseNativeDriver‚Äù ‚Äì all animations runs on the UI thread by default</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reanimated-overview"></a>Reanimated overview<a class="hash-link" href="#reanimated-overview" title="Direct link to heading">#</a></h3><p>We aim to bring this project to be fully compatible with <code>Animated</code> API. We believe that the set of base nodes we have selected should make this possible to be done only by writing JS code and does not require significant changes in the native codebases. Here is a list of things that haven&#x27;t yet been ported from the original version of <code>Animated</code> library.
All the functionality that missing elements provide in <code>Animated</code> can already be achieved with <code>react-native-reanimated</code> although a different methodology for implementing those may be required (e.g. check <a href="/react-native-reanimated/docs/1.x.x/declarative">&quot;Declarative Animation API&quot; section</a> to see how the implementation may differ).</p><ul><li>using value offsets</li><li>value tracking (can be achieved in different way, <code>react-native-reanimated</code> also allows for tracking all the animation parameters not only destination params)</li><li>animation staggering</li><li>animation delays</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="at-most-once-evaluation-the-algorithm"></a>At most once evaluation (the algorithm)<a class="hash-link" href="#at-most-once-evaluation-the-algorithm" title="Direct link to heading">#</a></h3><p>Unlike the original <code>Animated</code> library where each node could have been evaluated many times within a single frame, <code>react-native-reanimated</code> restricts each node to be evaluated at most once in a frame.
This restriction is required for nodes that have side-effects to be used (e.g. <a href="/react-native-reanimated/docs/1.x.x/nodes/set"><code>set</code></a> or <a href="/react-native-reanimated/docs/1.x.x/nodes/startClock"><code>startClock</code></a>).
When node is evaluated (e.g. in case of an <a href="/react-native-reanimated/docs/1.x.x/nodes/add"><code>add</code></a> node we want to get a sum of the input nodes) its value is cached. If within the next frame there are other nodes that want to use the output of that node instead of evaluating we return cached value.
This notion also helps with performance as we can try to evaluate as few nodes as expected.
The current algorithm for making decisions of which nodes to evaluate works as follows:</p><ol><li>For each frame we first analyze the generated events (e.g. touch stream). It is possible that events may update some animated values.</li><li>Then we update values that correspond to <a href="/react-native-reanimated/docs/1.x.x/clock">clock</a> nodes that are &quot;running&quot;.</li><li>We traverse the node&#x27;s tree starting from the nodes that have been updated in the current cycle and we look for final nodes that are connected to views.</li><li>If we found nodes connected to view properties we evaluate them. This can recursively trigger an evaluation for their input nodes etc.</li><li>After everything is done we check if some &quot;running&quot; clocks exists. If so we enqueue a callback to be evaluated with the next frame and start over from pt 1. Otherwise we do nothing.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="100-declarative-gesture-interactions"></a>100% declarative gesture interactions<a class="hash-link" href="#100-declarative-gesture-interactions" title="Direct link to heading">#</a></h3><p><code>react-native-reanimated</code> works best with the <a href="https://kmagiera.github.io/react-native-gesture-handler" target="_blank" rel="noopener noreferrer">Gesture Handler</a>
library. Currently all the examples are made using that library, including the ultimate
<a href="https://github.com/software-mansion/react-native-reanimated/blob/main/Example/src/imageViewer" target="_blank" rel="noopener noreferrer">ImagePreview app</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/react-native-reanimated/docs/1.x.x/getting_started"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Getting started ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#motivation" class="table-of-contents__link">Motivation</a></li><li><a href="#reanimated-overview" class="table-of-contents__link">Reanimated overview</a></li><li><a href="#at-most-once-evaluation-the-algorithm" class="table-of-contents__link">At most once evaluation (the algorithm)</a></li><li><a href="#100-declarative-gesture-interactions" class="table-of-contents__link">100% declarative gesture interactions</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://swmansion.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_qW4Z"><img src="/react-native-reanimated/img/swmLogo.svg" alt="Software Mansion" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/react-native-reanimated/img/swmLogo.svg" alt="Software Mansion" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div></div></div></footer></div>
<script src="/react-native-reanimated/assets/js/runtime~main.be6d17ac.js"></script>
<script src="/react-native-reanimated/assets/js/main.6f849bf3.js"></script>
</body>
</html>